
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Notes</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: black; color: white; }
        .note { border: 1px solid white; padding: 10px; margin: 10px; background-color: #333; }
    </style>
</head>
<body>
    <h1>üìù GitHub Notes</h1>

    <input type="text" id="noteTitle" placeholder="Title">
    <textarea id="noteContent" placeholder="Write your note..."></textarea>
    <button onclick="saveNote()">Save Note</button>

    <h2>Saved Notes:</h2>
    <div id="notes-container">Loading...</div>
    
    <div id="response"></div> <!-- Show response here -->

    <script>
        const repoOwner = "Hiplitehehe";  
        const repoName = "cautious-dollop";  
        const filePath = "index.html";  
        const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath}`;

        function showResponse(message, isSuccess) {
            const responseDiv = document.getElementById("response");
            responseDiv.textContent = message;
            responseDiv.style.color = isSuccess ? "green" : "red";
        }

        async function loadNotes() {
            try {
                const response = await fetch(apiUrl);
                if (!response.ok) throw new Error("Failed to fetch notes");

                const data = await response.json();
                const decodedContent = atob(data.content);

                const notesMatch = decodedContent.match(/<!-- NOTES_START -->([\s\S]*?)<!-- NOTES_END -->/);
                document.getElementById("notes-container").innerHTML = notesMatch ? notesMatch[1] : "No notes found.";
            } catch (error) {
                showResponse("Error loading notes: " + error.message, false);
            }
        }

        function saveNote() {
            const title = document.getElementById("noteTitle").value;
            const content = document.getElementById("noteContent").value;
            if (!title || !content) return showResponse("Title and content required!", false);

            fetch("https://api.github.com/repos/Hiplitehehe/Notes/actions/workflows/update-notes.yml/dispatches", {
                method: "POST",
                headers: {
                    "Accept": "application/vnd.github.v3+json",
                    "Authorization": "Bearer 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"
                },
                body: JSON.stringify({ ref: "main" })
            })
            .then(response => response.json())
            .then(data => showResponse("GitHub Actions triggered: " + JSON.stringify(data), true))
            .catch(error => showResponse("Error triggering GitHub Actions: " + error.message, false));
        }

        loadNotes();
    </script>
</body>
</html>
